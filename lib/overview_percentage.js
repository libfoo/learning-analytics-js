/*! liblax v0.1.0 | (c) JÎµan Sacren <sakiwit@gmail.com> | AGPL-3.0 */

jQuery(function(e){function t(){e("form + div").html("Would you like to show the overview percentage?")}e("form").submit(function(){return e("form input").prop("disabled",!0),e("form + div").html("Pulling data, please wait..."),e.post("https://mediafiles.uvu.edu/lib/t/extracted.php",e(this).serialize(),function(t){var i,r=e("select option:selected").text().replace(/-/g," "),n=" students visited overview page",o=parseInt(e("select option:selected").val()),d=/overview/i,v=[],l=[];if(0!==(i=e.parseJSON(t)).length){for(var u in i){var s=parseInt(i[u].course_id),a=parseInt(i[u].user_id),f=i[u].http_request_clean;s===o&&(v.some(function(e){return e===a})||v.push(a),d.test(f)&&!l.some(function(e){return e===a})&&l.push(a))}var c=v.length,m=l.length;0!==c?0!==m?c!==m?(n=(m/c*100).toPrecision(2)+"%"+n,e("form + div").html(function(){return"<div>"+r+"</div>"+("<div>"+n+"</div>")})):e("form + div").html(function(){return"<div>"+r+"</div>"+("<div>100%"+n+"</div>")}):e("form + div").html(function(){return"<div>"+r+"</div>"+"<div>No user visited overview page</div>"}):e("form + div").html(function(){return"<div>"+r+"</div>"+"<div>No enrollment</div>"})}else e("form + div").html("No enrollment.")}).fail(function(){window.alert("Error: Pulling data!")}),!1}),e("form > select").change(function(){e("form input").prop("disabled",!1),t()}),t(),e("form input").val("Show Percentage")});